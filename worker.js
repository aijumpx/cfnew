const A=b;(function(c,d){const z=b,e=c();while(!![]){try{const f=-parseInt(z(0x20b))/0x1*(parseInt(z(0x1d0))/0x2)+parseInt(z(0x221))/0x3*(parseInt(z(0x1f5))/0x4)+-parseInt(z(0x232))/0x5*(parseInt(z(0x1dd))/0x6)+parseInt(z(0x1f6))/0x7*(parseInt(z(0x216))/0x8)+-parseInt(z(0x212))/0x9+parseInt(z(0x1fe))/0xa*(parseInt(z(0x205))/0xb)+-parseInt(z(0x200))/0xc*(-parseInt(z(0x1a9))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xde62b));import{connect}from'cloudflare:sockets';const authToken=A(0x21e);let fallbackAddress='';function b(c,d){c=c-0x197;const e=a();let f=e[c];return f;}const socks5Config='',manualWorkerRegion='',customPath='',githubPreferredURL=A(0x229),enableGitHubPreferred=!![],enableOtherPreferred=!![],apiBaseUrl='https://cf.maiship.com/sub',directDomains=[{'name':'cloudflare.182682.xyz','domain':A(0x226)},{'name':A(0x1f4),'domain':A(0x1f4)},{'domain':A(0x1ba)},{'domain':A(0x1bf)},{'domain':'cdn.2020111.xyz'},{'domain':A(0x22f)},{'domain':A(0x1a4)},{'domain':'cf.090227.xyz'},{'domain':'cf.zhetengsha.eu.org'},{'domain':A(0x22d)},{'domain':'cf.zerone-cdn.pp.ua'},{'domain':'cfip.1323123.xyz'},{'domain':A(0x1e2)},{'domain':A(0x209)},{'domain':'115155.xyz'},{'domain':A(0x1db)},{'domain':A(0x225)},{'domain':A(0x1ec)},{'domain':A(0x1b5)},{'domain':A(0x1a8)},{'domain':'xn--b6gac.eu.org'}],parsedSocks5Config={},isSocksEnabled=![];let enableRegionMatching=!![],currentWorkerRegion='';const backupIPs=[{'domain':'ProxyIP.US.CMLiussss.net','region':'US','regionCode':'US','port':0x1bb},{'domain':A(0x1d9),'region':'SG','regionCode':'SG','port':0x1bb},{'domain':A(0x222),'region':'JP','regionCode':'JP','port':0x1bb},{'domain':A(0x1df),'region':'HK','regionCode':'HK','port':0x1bb},{'domain':'ProxyIP.KR.CMLiussss.net','region':'KR','regionCode':'KR','port':0x1bb},{'domain':A(0x1b9),'region':'DE','regionCode':'DE','port':0x1bb},{'domain':A(0x1e4),'region':'SE','regionCode':'SE','port':0x1bb},{'domain':A(0x1a1),'region':'NL','regionCode':'NL','port':0x1bb},{'domain':A(0x1b6),'region':'FI','regionCode':'FI','port':0x1bb},{'domain':A(0x1b0),'region':'GB','regionCode':'GB','port':0x1bb}],E_INVALID_DATA=atob('aW52YWxpZCBkYXRh'),E_INVALID_USER=atob(A(0x19b)),E_UNSUPPORTED_CMD=atob('Y29tbWFuZCBpcyBub3Qgc3VwcG9ydGVk'),E_UDP_DNS_ONLY=atob(A(0x1c7)),E_INVALID_ADDR_TYPE=atob(A(0x1a7)),E_EMPTY_ADDR=atob(A(0x208)),E_WS_NOT_OPEN=atob(A(0x1d4)),E_INVALID_ID_STR=atob(A(0x1c3)),E_INVALID_SOCKS_ADDR=atob(A(0x237)),E_SOCKS_NO_METHOD=atob(A(0x21c)),E_SOCKS_AUTH_NEEDED=atob('c29ja3Mgc2VydmVyIG5lZWRzIGF1dGg='),E_SOCKS_AUTH_FAIL=atob(A(0x1b4)),E_SOCKS_CONN_FAIL=atob(A(0x1b8)),ADDRESS_TYPE_IPV4=0x1,ADDRESS_TYPE_URL=0x2,ADDRESS_TYPE_IPV6=0x3;async function detectWorkerRegion(c){const B=A;try{const d=c['cf']?.[B(0x1c1)];if(d){const e={'US':'US','SG':'SG','JP':'JP','HK':'HK','KR':'KR','DE':'DE','SE':'SE','NL':'NL','FI':'FI','GB':'GB','CN':'HK','TW':'HK','AU':'SG','CA':'US','FR':'DE','IT':'DE','ES':'DE','CH':'DE','AT':'DE','BE':'NL','DK':'SE','NO':'SE','IE':'GB'};if(e[d])return e[d];}return'HK';}catch(f){return'HK';}}function getNearbyRegions(c){const d={'US':['SG','JP','HK','KR'],'SG':['JP','HK','KR','US'],'JP':['SG','HK','KR','US'],'HK':['SG','JP','KR','US'],'KR':['JP','HK','SG','US'],'DE':['NL','GB','SE','FI'],'SE':['DE','NL','FI','GB'],'NL':['DE','GB','SE','FI'],'FI':['SE','DE','NL','GB'],'GB':['DE','NL','SE','FI']};return d[c]||[];}function getAllRegionsByPriority(c){const C=A,d=getNearbyRegions(c),e=['US','SG','JP','HK','KR','DE','SE','NL','FI','GB'];return[c,...d,...e[C(0x201)](f=>f!==c&&!d['includes'](f))];}function getSmartRegionSelection(c,d){const D=A;if(!enableRegionMatching||!c)return d;const e=getAllRegionsByPriority(c),f=[];for(const g of e){const h=d[D(0x201)](i=>i[D(0x1d2)]===g);f[D(0x1e6)](...h);}return f;}async function getBestBackupIP(c=''){const E=A;if(backupIPs['length']===0x0)return null;const d=backupIPs['map'](e=>({...e,'available':!![]}));if(enableRegionMatching&&c){const e=getSmartRegionSelection(c,d);if(e[E(0x19c)]>0x0)return e[0x0];}return d[0x0];}function parseAddressAndPort(c){const F=A,d={'KSwLW':function(f,g,h){return f(g,h);},'wfgqF':function(f,g){return f+g;}};if(!c)return{'address':'','port':null};if(c[F(0x215)]('[')&&c[F(0x215)](']')){const f=c[F(0x220)](/^\[([^\]]+)\](?::(\d+))?$/);if(f)return{'address':f[0x1],'port':f[0x2]?d[F(0x1d8)](parseInt,f[0x2],0xa):null};}const e=c[F(0x1f3)](':');if(e>0x0){const g=c[F(0x206)](0x0,e),h=c['substring'](d[F(0x1bc)](e,0x1)),i=parseInt(h,0xa);if(!isNaN(i)&&i>0x0&&i<=0xffff)return{'address':g,'port':i};}return{'address':c,'port':null};}function a(){const aa=['wfgqF','RYTdc','socket','bestcf.top','Initial\x20connection\x20failed,\x20trying\x20fallback:','country','addEventListener','U3RyaW5naWZpZWQgaWRlbnRpZmllciBpcyBpbnZhbGlk','UUID错误','BtlcL','url','VURQIHByb3h5IG9ubHkgZW5hYmxlIGZvciBETlMgd2hpY2ggaXMgcG9ydCA1Mw==','toString','Mmphb','getWriter','ADWPe','endsWith','DMqIh','hostname','releaseLock','26xMThZT','tls','regionCode','close','d2ViU29ja2V0LmVhZHlTdGF0ZSBpcyBub3Qgb3Blbg==','writable','test','8.8.4.4','KSwLW','ProxyIP.SG.CMLiussss.net','OkUSY','cname.xirancdn.us','toUpperCase','6EwGivF','replace','ProxyIP.HK.CMLiussss.net','UynTC','pipeTo','cnamefuckxxs.yuchen.icu','vless://00000000-0000-0000-0000-000000000000@127.0.0.1:80?encryption=none&security=none&type=ws&host=error.com&path=%2F#','ProxyIP.SE.CMLiussss.net','data','push','toLowerCase','name','write','EczPO','enqueue','8.889288.xyz','buffer','Upgrade','jneub','<!DOCTYPE\x20html><html\x20lang=\x22zh-CN\x22><head><meta\x20charset=\x22UTF-8\x22><meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22><title>服务正常</title><style>body{font-family:-apple-system,BlinkMacSystemFont,\x27Segoe\x20UI\x27,Roboto,Helvetica,Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#121212;color:#e0e0e0;text-align:center;}.container{padding:2rem;border-radius:8px;background-color:#1e1e1e;box-shadow:0\x204px\x206px\x20rgba(0,0,0,0.1);}h1{color:#4caf50;}</style></head><body><div\x20class=\x22container\x22><h1>✅\x20服务正常</h1><p>请继续后面的操作。</p></div></body></html>','accept','values','lastIndexOf','speed.marisalnc.com','51284hARzlZ','432187tqzXjQ','uDEDS','sub','sec-websocket-protocol','pWpnM','finally','<!DOCTYPE\x20html>\x0a<html\x20lang=\x22zh-CN\x22>\x0a<head>\x0a<meta\x20charset=\x22UTF-8\x22>\x0a<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a<title>订阅中心</title>\x0a<style>\x0a*{margin:0;padding:0;box-sizing:border-box}\x0abody{font-family:\x22Courier\x20New\x22,monospace;background:#000;color:#00ff00;min-height:100vh;overflow-x:hidden;position:relative}\x0a.matrix-bg{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#000\x200%,#001100\x2050%,#000\x20100%);z-index:-1}\x0a.matrix-rain{position:fixed;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(0deg,transparent,transparent\x202px,rgba(0,255,0,0.03)\x202px,rgba(0,255,0,0.03)\x204px);animation:matrix-fall\x2020s\x20linear\x20infinite;z-index:-1}\x0a@keyframes\x20matrix-fall{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}\x0a.container{max-width:900px;margin:0\x20auto;padding:20px;position:relative;z-index:1}\x0a.header{text-align:center;margin-bottom:40px}\x0a.title{font-size:3rem;font-weight:bold;text-shadow:0\x200\x2010px\x20#00ff00,0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00;margin-bottom:10px;animation:matrix-glow\x202s\x20ease-in-out\x20infinite\x20alternate}\x0a@keyframes\x20matrix-glow{from{text-shadow:0\x200\x2010px\x20#00ff00,0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00}to{text-shadow:0\x200\x2020px\x20#00ff00,0\x200\x2030px\x20#00ff00,0\x200\x2040px\x20#00ff00}}\x0a.subtitle{color:#00aa00;margin-bottom:30px;font-size:1.2rem}\x0a.card{background:rgba(0,20,0,0.8);border:2px\x20solid\x20#00ff00;border-radius:0;padding:30px;margin-bottom:20px;box-shadow:0\x200\x2020px\x20rgba(0,255,0,0.3);position:relative}\x0a.card::before{content:\x22\x22;position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,transparent\x2049%,#00ff00\x2050%,transparent\x2051%);opacity:0.1;pointer-events:none}\x0a.card-title{font-size:1.8rem;margin-bottom:20px;color:#00ff00;text-shadow:0\x200\x205px\x20#00ff00}\x0a.client-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:15px;margin:20px\x200}\x0a.client-btn{background:rgba(0,20,0,0.6);border:2px\x20solid\x20#00ff00;padding:15px\x2020px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-weight:bold;cursor:pointer;transition:all\x200.3s\x20ease;text-align:center;position:relative;overflow:hidden}\x0a.client-btn::before{content:\x22\x22;position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,255,0,0.3),transparent);transition:left\x200.5s\x20ease}\x0a.client-btn:hover::before{left:100%}\x0a.client-btn:hover{background:rgba(0,255,0,0.2);box-shadow:0\x200\x2015px\x20#00ff00;transform:translateY(-2px)}\x0a.generate-btn{background:rgba(0,255,0,0.1);border:2px\x20solid\x20#00ff00;padding:15px\x2030px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-weight:bold;cursor:pointer;transition:all\x200.3s\x20ease;margin-right:15px}\x0a.generate-btn:hover{background:rgba(0,255,0,0.3);box-shadow:0\x200\x2020px\x20#00ff00;transform:translateY(-2px)}\x0a.subscription-url{background:rgba(0,0,0,0.8);border:1px\x20solid\x20#00ff00;padding:15px;word-break:break-all;font-family:\x22Courier\x20New\x22,monospace;color:#00ff00;margin-top:20px;display:none;box-shadow:inset\x200\x200\x2010px\x20rgba(0,255,0,0.3)}\x0a.matrix-text{position:fixed;top:20px;right:20px;color:#00ff00;font-family:\x22Courier\x20New\x22,monospace;font-size:0.8rem;opacity:0.6;animation:matrix-flicker\x203s\x20infinite}\x0a@keyframes\x20matrix-flicker{0%,100%{opacity:0.6}50%{opacity:1}}\x0a</style>\x0a</head>\x0a<body>\x0a<div\x20class=\x22matrix-bg\x22></div>\x0a<div\x20class=\x22matrix-rain\x22></div>\x0a<div\x20class=\x22matrix-text\x22>代理订阅中心精简版\x20v2.1</div>\x0a<div\x20class=\x22container\x22>\x0a<div\x20class=\x22header\x22>\x0a<h1\x20class=\x22title\x22>代理订阅中心</h1>\x0a<p\x20class=\x22subtitle\x22>多客户端支持\x20•\x20智能优选\x20•\x20一键生成</p>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20选择客户端\x20]</h2>\x0a<div\x20class=\x22client-grid\x22>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27clash\x27,\x27CLASH\x27)\x22>CLASH</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27surge\x27,\x27SURGE\x27)\x22>SURGE</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27singbox\x27,\x27SING-BOX\x27)\x22>SING-BOX</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27loon\x27,\x27LOON\x27)\x22>LOON</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27quanx\x27,\x27QUANTUMULT\x20X\x27)\x22>QUANTUMULT\x20X</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27V2RAY\x27)\x22>V2RAY</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27Shadowrocket\x27)\x22>Shadowrocket</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27V2RAYNG\x27)\x22>V2RAYNG</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27v2ray\x27,\x27NEKORAY\x27)\x22>NEKORAY</button>\x0a<button\x20class=\x22client-btn\x22\x20onclick=\x22generateClientLink(\x27clash\x27,\x27STASH\x27)\x22>STASH</button>\x0a</div>\x0a<div\x20class=\x22subscription-url\x22\x20id=\x22clientSubscriptionUrl\x22></div>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20快速获取\x20]</h2>\x0a<button\x20class=\x22generate-btn\x22\x20onclick=\x22getBase64Subscription()\x22>获取订阅链接</button>\x0a<div\x20class=\x22subscription-url\x22\x20id=\x22base64SubscriptionUrl\x22></div>\x0a</div>\x0a<div\x20class=\x22card\x22>\x0a<h2\x20class=\x22card-title\x22>[\x20相关链接\x20]</h2>\x0a<div\x20style=\x22text-align:center;margin:20px\x200\x22>\x0a<a\x20href=\x22https://github.com/byJoey/cfnew\x22\x20target=\x22_blank\x22\x20style=\x22color:#00ff00;text-decoration:none;margin:0\x2020px;font-size:1.2rem;text-shadow:0\x200\x205px\x20#00ff00\x22>GitHub\x20项目</a>\x0a<a\x20href=\x22https://www.youtube.com/@joeyblog\x22\x20target=\x22_blank\x22\x20style=\x22color:#00ff00;text-decoration:none;margin:0\x2020px;font-size:1.2rem;text-shadow:0\x200\x205px\x20#00ff00\x22>YouTube\x20@joeyblog</a>\x0a</div>\x0a</div>\x0a</div>\x0a<script>\x0avar\x20SUB_CONVERTER_URL=\x22','port','10vjBSwy','GET','2966064mZKqQn','filter','text/plain;\x20charset=utf-8','method','websocket','4712884qltaiK','substring','message','YWRkcmVzc1ZhbHVlIGlzIGVtcHR5','cloudflare-ip.mofashi.ltd','NgHPz','139042GgEIgW','get','LHjuK','startsWith','arrayBuffer','text/html;\x20charset=utf-8','address','8472114rBRhWC','原生地址','catch','includes','56OvsBfe','error','/sub','PPAxW','join','mERTe','bm8gYWNjZXB0YWJsZSBtZXRob2Rz','AiaDv','ec387f89-bb13-49c2-8d70-a7685c8ebb00','epGAI','match','426BAVQQD','ProxyIP.JP.CMLiussss.net','log','readable','f3058171cad.002404.xyz','cloudflare.182682.xyz','所有节点获取失败','send','https://raw.githubusercontent.com/qwer-search/bestip/refs/heads/main/kejilandbestip.txt','访问被拒绝','byteLength','MfirG','cloudflare.9jy.cc','pathname','cfip.cfcdn.vip','randomized','Stream\x20connection\x20error:','8701610NZsqgN','from','cDtDr','forEach','charCodeAt','SW52YWxpZCBTT0NLUyBhZGRyZXNzIGZvcm1hdA==','GIBng','eYDul','readyState','dSeTn','UttUB','DNS\x20forward\x20error:\x20','domain','aW52YWxpZCB1c2Vy','length','closed','slice','jIUOJ','no-store,\x20no-cache,\x20must-revalidate,\x20max-age=0','ProxyIP.NL.CMLiussss.net','application/json;\x20charset=utf-8','DgdzA','cf.0sm.com','Readable\x20aborted:','DfubK','aW52YWxpZCBhZGRyZXNzVHlwZQ==','cf.877771.xyz','143DisuyS','headers','text','://','trim','split','Not\x20Found','ProxyIP.GB.CMLiussss.net','/?ed=2048','\x22;\x0afunction\x20tryOpenApp(schemeUrl,fallbackCallback,timeout){\x0atimeout=timeout||2500;\x0avar\x20appOpened=false;\x0avar\x20callbackExecuted=false;\x0avar\x20startTime=Date.now();\x0avar\x20blurHandler=function(){\x0avar\x20elapsed=Date.now()-startTime;\x0aif(elapsed<3000&&!callbackExecuted){appOpened=true;}\x0a};\x0awindow.addEventListener(\x27blur\x27,blurHandler);\x0avar\x20hiddenHandler=function(){\x0avar\x20elapsed=Date.now()-startTime;\x0aif(elapsed<3000&&!callbackExecuted){appOpened=true;}\x0a};\x0adocument.addEventListener(\x27visibilitychange\x27,hiddenHandler);\x0avar\x20iframe=document.createElement(\x27iframe\x27);\x0aiframe.style.display=\x27none\x27;\x0aiframe.style.width=\x271px\x27;\x0aiframe.style.height=\x271px\x27;\x0aiframe.src=schemeUrl;\x0adocument.body.appendChild(iframe);\x0asetTimeout(function(){\x0aif(iframe.parentNode)iframe.parentNode.removeChild(iframe);\x0awindow.removeEventListener(\x27blur\x27,blurHandler);\x0adocument.removeEventListener(\x27visibilitychange\x27,hiddenHandler);\x0aif(!callbackExecuted){\x0acallbackExecuted=true;\x0aif(!appOpened&&fallbackCallback)fallbackCallback();\x0a}\x0a},timeout);\x0a}\x0afunction\x20generateClientLink(clientType,clientName){\x0avar\x20currentUrl=window.location.href;\x0avar\x20subscriptionUrl=currentUrl+\x22/sub\x22;\x0avar\x20schemeUrl=\x27\x27;\x0avar\x20displayName=clientName||\x27\x27;\x0avar\x20finalUrl=subscriptionUrl;\x0aif(clientType===\x27v2ray\x27){\x0afinalUrl=subscriptionUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).textContent=finalUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).style.display=\x22block\x22;\x0aif(clientName===\x27V2RAY\x27){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a}else\x20if(clientName===\x27Shadowrocket\x27){\x0aschemeUrl=\x27shadowrocket://add/\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else\x20if(clientName===\x27V2RAYNG\x27){\x0aschemeUrl=\x27v2rayng://install?url=\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else\x20if(clientName===\x27NEKORAY\x27){\x0aschemeUrl=\x27nekoray://install-config?url=\x27+encodeURIComponent(finalUrl);\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}\x0a}else{\x0avar\x20encodedUrl=encodeURIComponent(subscriptionUrl);\x0afinalUrl=SUB_CONVERTER_URL+\x22?target=\x22+clientType+\x22&url=\x22+encodedUrl+\x22&insert=false\x22;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).textContent=finalUrl;\x0adocument.getElementById(\x22clientSubscriptionUrl\x22).style.display=\x22block\x22;\x0aif(clientType===\x27clash\x27){\x0aif(clientName===\x27STASH\x27){\x0aschemeUrl=\x27stash://install?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27STASH\x27;\x0a}else{\x0aschemeUrl=\x27clash://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27CLASH\x27;\x0a}\x0a}else\x20if(clientType===\x27surge\x27){\x0aschemeUrl=\x27surge:///install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27SURGE\x27;\x0a}else\x20if(clientType===\x27singbox\x27){\x0aschemeUrl=\x27sing-box://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27SING-BOX\x27;\x0a}else\x20if(clientType===\x27loon\x27){\x0aschemeUrl=\x27loon://install?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27LOON\x27;\x0a}else\x20if(clientType===\x27quanx\x27){\x0aschemeUrl=\x27quantumult-x://install-config?url=\x27+encodeURIComponent(finalUrl);\x0adisplayName=\x27QUANTUMULT\x20X\x27;\x0a}\x0aif(schemeUrl){\x0atryOpenApp(schemeUrl,function(){\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a});\x0a}else{\x0anavigator.clipboard.writeText(finalUrl).then(function(){alert(displayName+\x22\x20订阅链接已复制\x22);});\x0a}\x0a}\x0a}\x0afunction\x20getBase64Subscription(){\x0avar\x20currentUrl=window.location.href;\x0avar\x20subscriptionUrl=currentUrl+\x22/sub\x22;\x0afetch(subscriptionUrl).then(function(response){return\x20response.text();}).then(function(base64Content){\x0adocument.getElementById(\x22base64SubscriptionUrl\x22).textContent=base64Content;\x0adocument.getElementById(\x22base64SubscriptionUrl\x22).style.display=\x22block\x22;\x0anavigator.clipboard.writeText(base64Content).then(function(){alert(\x22Base64订阅内容已复制\x22);});\x0a}).catch(function(error){alert(\x22获取订阅失败，请重试\x22);});\x0a}\x0a</script>\x0a</body>\x0a</html>','getUint16','ZmFpbCB0byBhdXRoIHNvY2tzIHNlcnZlcg==','cdn.tzpro.xyz','ProxyIP.FI.CMLiussss.net','vless','ZmFpbCB0byBvcGVuIHNvY2tzIGNvbm5lY3Rpb24=','ProxyIP.DE.CMLiussss.net','freeyx.cloudflare88.eu.org','deWKq'];a=function(){return aa;};return a();}export default{async 'fetch'(c,d,e){const G=A,f={'OkUSY':function(g,h){return g+h;},'UynTC':function(g,h){return g===h;},'DMqIh':function(g,h){return g===h;},'pWpnM':function(g,h){return g!==h;},'ikpCi':G(0x218),'mERTe':G(0x22a),'MfirG':function(g,h){return g!==h;},'yvpGT':function(g,h){return g===h;},'Mmphb':G(0x1f8)};try{const g=new URL(c[G(0x1c6)]);manualWorkerRegion&&manualWorkerRegion['trim']()?currentWorkerRegion=manualWorkerRegion[G(0x1ad)]()[G(0x1dc)]():currentWorkerRegion=await detectWorkerRegion(c);let h=fallbackAddress;if(!h&&currentWorkerRegion){const i=await getBestBackupIP(currentWorkerRegion);if(i)h=f[G(0x1da)](i[G(0x19a)],':')+i[G(0x1fd)];}if(c[G(0x1aa)][G(0x20c)](G(0x1ee))===G(0x204))return await handleWsRequest(c,h);else{if(f[G(0x1e0)](c[G(0x203)],G(0x1ff))){if(f['DMqIh'](g[G(0x22e)],'/')){const j=G(0x1f0);return new Response(j,{'status':0xc8,'headers':{'Content-Type':G(0x210)}});}if(customPath&&customPath[G(0x1ad)]()){const k=customPath[G(0x1ad)]()[G(0x20e)]('/')?customPath['trim']():'/'+customPath['trim'](),l=k['endsWith']('/')&&k[G(0x19c)]>0x1?k['slice'](0x0,-0x1):k,m=g['pathname'][G(0x1cc)]('/')&&g[G(0x22e)][G(0x19c)]>0x1?g['pathname'][G(0x19e)](0x0,-0x1):g['pathname'];if(m===l)return await handleSubscriptionPage(c,authToken);if(m===f['OkUSY'](l,G(0x218)))return await handleSubscriptionRequest(c,authToken,g);if(g['pathname']['length']>0x1&&f[G(0x1fa)](g[G(0x22e)],'/')){const n=g[G(0x22e)][G(0x1de)](/\/$/,'')['replace'](f['ikpCi'],'')[G(0x206)](0x1);if(isValidFormat(n))return new Response(JSON['stringify']({'error':f[G(0x21b)],'message':'当前\x20Worker\x20已启用自定义路径模式，UUID\x20访问已禁用'}),{'status':0x193,'headers':{'Content-Type':G(0x1a2)}});}}else{if(g[G(0x22e)][G(0x19c)]>0x1&&f[G(0x22c)](g[G(0x22e)],'/')&&!g['pathname'][G(0x215)](G(0x218))){const o=g[G(0x22e)][G(0x1de)](/\/$/,'')[G(0x206)](0x1);if(isValidFormat(o)){if(f[G(0x1cd)](o,authToken))return await handleSubscriptionPage(c,o);return new Response('UUID错误',{'status':0x193});}}if(g[G(0x22e)][G(0x215)]('/sub')){const p=g[G(0x22e)][G(0x1ae)]('/');if(f['yvpGT'](p['length'],0x2)&&f['DMqIh'](p[0x1],f[G(0x1c9)])){const q=p[0x0][G(0x206)](0x1);if(isValidFormat(q)){if(f['DMqIh'](q,authToken))return await handleSubscriptionRequest(c,q,g);return new Response(G(0x1c4),{'status':0x193});}}}if(g['pathname'][G(0x1e7)]()[G(0x215)]('/'+authToken))return await handleSubscriptionRequest(c,authToken);}}}return new Response(G(0x1af),{'status':0x194});}catch(r){return new Response(r[G(0x1c8)](),{'status':0x1f4});}}};async function handleSubscriptionPage(c,d=null){const H=A,e={'KtjgQ':'text/html;\x20charset=utf-8'};if(!d)d=authToken;const f=H(0x1fc)+apiBaseUrl+H(0x1b2);return new Response(f,{'status':0xc8,'headers':{'Content-Type':e['KtjgQ']}});}async function handleSubscriptionRequest(c,d,e=null){const I=A,f={'cDtDr':function(k,l){return k===l;},'GIBng':I(0x227),'QVPOf':I(0x202)};if(!e)e=new URL(c[I(0x1c6)]);const g=[],h=e[I(0x1ce)],i=[{'ip':h,'isp':I(0x213)}];g[I(0x1e6)](...generateLinksFromSource(i,d,h));if(enableOtherPreferred){const k=directDomains['map'](l=>({'ip':l[I(0x19a)],'isp':l[I(0x1e8)]||l[I(0x19a)]}));g[I(0x1e6)](...generateLinksFromSource(k,d,h));}if(enableGitHubPreferred){const l=await fetchAndParseNewIPs();if(l[I(0x19c)]>0x0)g[I(0x1e6)](...generateLinksFromNewIPs(l,d,h));}if(f[I(0x234)](g[I(0x19c)],0x0)){const m=f[I(0x238)],n=I(0x1e3)+encodeURIComponent(m);g[I(0x1e6)](n);}const j=btoa(g[I(0x21a)]('\x0a'));return new Response(j,{'headers':{'Content-Type':f['QVPOf'],'Cache-Control':I(0x1a0)}});}function generateLinksFromSource(c,d,e){const J=A,f=[0x1bb],g=[],h=J(0x1b1),i=J(0x1b7);return c['forEach'](j=>{const K=J,k=j['isp'][K(0x1de)](/\s/g,'_'),l=j['ip'][K(0x215)](':')?'['+j['ip']+']':j['ip'];f[K(0x235)](m=>{const L=K,n=k+'-'+m+'-WS-TLS',o=new URLSearchParams({'encryption':'none','security':L(0x1d1),'sni':e,'fp':L(0x230),'type':'ws','host':e,'path':h});g[L(0x1e6)](i+L(0x1ac)+d+'@'+l+':'+m+'?'+o['toString']()+'#'+encodeURIComponent(n));});}),g;}async function fetchAndParseNewIPs(){const M=A,c=githubPreferredURL;try{const d=await fetch(c);if(!d['ok'])return[];const e=await d[M(0x1ab)](),f=[],g=e[M(0x1ad)]()[M(0x1de)](/\r/g,'')['split']('\x0a'),h=/^([^:]+):(\d+)#(.*)$/;for(const i of g){const j=i[M(0x1ad)]();if(!j)continue;const k=j[M(0x220)](h);k&&f[M(0x1e6)]({'ip':k[0x1],'port':parseInt(k[0x2],0xa),'name':k[0x3]['trim']()||k[0x1]});}return f;}catch(l){return[];}}function generateLinksFromNewIPs(c,d,e){const N=A,f={'uDEDS':N(0x1d1),'rccEg':N(0x230)},g=[],h=N(0x1b1),i='vless';return c[N(0x235)](j=>{const O=N,k=j[O(0x1e8)],l=j['ip'][O(0x215)](':')?'['+j['ip']+']':j['ip'],m={'encryption':'none','security':f[O(0x1f7)],'sni':e,'fp':f['rccEg'],'type':'ws','host':e,'path':h},n=new URLSearchParams(m);g[O(0x1e6)](i+'://'+d+'@'+l+':'+j[O(0x1fd)]+'?'+n[O(0x1c8)]()+'#'+encodeURIComponent(k));}),g;}async function handleWsRequest(c,d=null){const P=A,e={'deWKq':function(n,o){return n||o;}},f=new WebSocketPair(),[g,h]=Object[P(0x1f2)](f);h[P(0x1f1)]();let i={'socket':null},j=![];const k=e[P(0x1bb)](d,fallbackAddress),l=c['headers']['get'](P(0x1f9))||'',m=makeReadableStream(h,l);return m[P(0x1e1)](new WritableStream({async 'write'(n){const Q=P;if(j)return await forwardUDP(n,h,null);if(i[Q(0x1be)]){const y=i[Q(0x1be)][Q(0x1d5)][Q(0x1ca)]();await y['write'](n),y[Q(0x1cf)]();return;}const {hasError:o,message:p,addressType:q,port:r,hostname:s,rawIndex:t,version:u,isUDP:v}=parseWsPacketHeader(n,authToken);if(o)throw new Error(p);if(v){if(r===0x35)j=!![];else throw new Error(E_UDP_DNS_ONLY);}const w=new Uint8Array([u[0x0],0x0]),x=n[Q(0x19e)](t);if(j)return forwardUDP(x,h,w);await forwardTCP(q,s,r,x,h,w,i,k);}}))['catch'](n=>{console['log']('WS\x20Stream\x20Error:',n);}),new Response(null,{'status':0x65,'webSocket':g});}async function forwardTCP(c,d,e,f,g,h,i,j=null){const T=A,k={'INboW':function(n,o){return n||o;},'jneub':function(n,o,p,q,r){return n(o,p,q,r);}};async function l(n,o){const R=b,p=connect({'hostname':n,'port':o}),q=p[R(0x1d5)]['getWriter']();return await q[R(0x1e9)](f),q[R(0x1cf)](),p;}async function m(){const S=b;let n,o;if(j&&j['trim']()){const q=parseAddressAndPort(j);n=q[S(0x211)],o=q['port']||e;}else{if(fallbackAddress&&fallbackAddress['trim']()){const r=parseAddressAndPort(fallbackAddress);n=r[S(0x211)],o=r[S(0x1fd)]||e;}else{const s=await getBestBackupIP(currentWorkerRegion);n=s?s['domain']:d,o=s?s['port']:e;}}const p=await l(k['INboW'](n,d),o);i[S(0x1be)]=p,p[S(0x19d)][S(0x214)](()=>{})[S(0x1fb)](()=>closeSocketQuietly(g)),k[S(0x1ef)](connectStreams,p,g,h,null);}try{const n=await l(d,e);i[T(0x1be)]=n,k[T(0x1ef)](connectStreams,n,g,h,m);}catch(o){console[T(0x223)](T(0x1c0),o),m();}}function parseWsPacketHeader(c,d){const U=A,e={'DgdzA':function(r,s){return r(s);},'AiaDv':function(r,s){return r===s;},'EczPO':function(r,s){return r+s;}};if(c[U(0x22b)]<0x18)return{'hasError':!![],'message':E_INVALID_DATA};const f=new Uint8Array(c[U(0x19e)](0x0,0x1));if(e[U(0x1a3)](formatIdentifier,new Uint8Array(c[U(0x19e)](0x1,0x11)))!==d)return{'hasError':!![],'message':E_INVALID_USER};const g=new Uint8Array(c['slice'](0x11,0x12))[0x0],h=new Uint8Array(c[U(0x19e)](0x12+g,0x13+g))[0x0];let j=![];if(h===0x1){}else{if(e[U(0x21d)](h,0x2))j=!![];else return{'hasError':!![],'message':E_UNSUPPORTED_CMD};}const k=0x13+g,l=new DataView(c[U(0x19e)](k,k+0x2))[U(0x1b3)](0x0);let m=k+0x2,n=0x0,o=m+0x1,p='';const q=new Uint8Array(c['slice'](m,o))[0x0];switch(q){case ADDRESS_TYPE_IPV4:n=0x4,p=new Uint8Array(c['slice'](o,o+n))[U(0x21a)]('.');break;case ADDRESS_TYPE_URL:n=new Uint8Array(c[U(0x19e)](o,o+0x1))[0x0],o+=0x1,p=new TextDecoder()['decode'](c['slice'](o,e[U(0x1ea)](o,n)));break;case ADDRESS_TYPE_IPV6:n=0x10;const r=[],s=new DataView(c[U(0x19e)](o,o+n));for(let t=0x0;t<0x8;t++)r['push'](s[U(0x1b3)](t*0x2)[U(0x1c8)](0x10));p=r[U(0x21a)](':');break;default:return{'hasError':!![],'message':E_INVALID_ADDR_TYPE+':\x20'+q};}if(!p)return{'hasError':!![],'message':E_EMPTY_ADDR+':\x20'+q};return{'hasError':![],'addressType':q,'port':l,'hostname':p,'isUDP':j,'rawIndex':o+n,'version':f};}function makeReadableStream(c,d){const V=A,e={'NgHPz':function(g,h){return g(h);},'LHjuK':V(0x1d3)};let f=![];return new ReadableStream({'start'(g){const W=V;c[W(0x1c2)](W(0x207),j=>{const X=W;if(!f)g[X(0x1eb)](j[X(0x1e5)]);}),c[W(0x1c2)](e[W(0x20d)],()=>{const Y=W;!f&&(e[Y(0x20a)](closeSocketQuietly,c),g[Y(0x1d3)]());}),c['addEventListener'](W(0x217),j=>g['error'](j));const {earlyData:h,error:i}=e[W(0x20a)](base64ToArray,d);if(i)g['error'](i);else{if(h)g[W(0x1eb)](h);}},'cancel'(){const Z=V;f=!![],e[Z(0x20a)](closeSocketQuietly,c);}});}async function connectStreams(c,d,e,f){const a0=A,g={'RYTdc':function(j,k){return j&&k;}};let h=e,i=![];await c[a0(0x224)]['pipeTo'](new WritableStream({async 'write'(j,k){const a1=a0;i=!![];if(d[a1(0x23a)]!==0x1)k[a1(0x217)](E_WS_NOT_OPEN);h?(d['send'](await new Blob([h,j])['arrayBuffer']()),h=null):d[a1(0x228)](j);},'abort'(j){const a2=a0;console[a2(0x217)](a2(0x1a5),j);}}))[a0(0x214)](j=>{const a3=a0;console[a3(0x217)](a3(0x231),j),closeSocketQuietly(d);});if(g[a0(0x1bd)](!i,f))f();}async function forwardUDP(c,d,e){const a4=A,f={'dSeTn':function(g,h){return g===h;}};try{const g=connect({'hostname':a4(0x1d7),'port':0x35});let h=e;const i=g[a4(0x1d5)][a4(0x1ca)]();await i[a4(0x1e9)](c),i[a4(0x1cf)](),await g['readable']['pipeTo'](new WritableStream({async 'write'(j){const a5=a4;f[a5(0x197)](d['readyState'],0x1)&&(h?(d[a5(0x228)](await new Blob([h,j])[a5(0x20f)]()),h=null):d['send'](j));}}));}catch(j){console[a4(0x217)](a4(0x199)+j[a4(0x207)]);}}function base64ToArray(c){const a6=A,d={'epGAI':function(e,f){return e(f);}};if(!c)return{'error':null};try{return c=c[a6(0x1de)](/-/g,'+')[a6(0x1de)](/_/g,'/'),{'earlyData':Uint8Array[a6(0x233)](d[a6(0x21f)](atob,c),e=>e[a6(0x236)](0x0))[a6(0x1ed)],'error':null};}catch(e){return{'error':e};}}function isValidFormat(c){const a7=A;return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i[a7(0x1d6)](c);}function closeSocketQuietly(c){const a8=A,d={'PPAxW':function(e,f){return e===f;}};try{if(d[a8(0x219)](c[a8(0x23a)],0x1)||c['readyState']===0x2)c[a8(0x1d3)]();}catch(e){}}const hexTable=Array['from']({'length':0x100},(c,d)=>(d+0x100)[A(0x1c8)](0x10)['slice'](0x1));function formatIdentifier(c,d=0x0){const a9=A,e={'ADWPe':function(g,h){return g+h;},'UttUB':function(g,h){return g+h;},'jIUOJ':function(g,h){return g+h;},'WFkmD':function(g,h){return g+h;},'eYDul':function(g,h){return g+h;},'DfubK':function(g,h){return g+h;},'BtlcL':function(g,h){return g+h;}},f=(e[a9(0x1cb)](e[a9(0x198)](e[a9(0x19f)](e['WFkmD'](e[a9(0x19f)](e[a9(0x239)](hexTable[c[d]]+hexTable[c[d+0x1]]+hexTable[c[d+0x2]],hexTable[c[e[a9(0x198)](d,0x3)]])+'-'+hexTable[c[d+0x4]]+hexTable[c[d+0x5]],'-')+hexTable[c[d+0x6]]+hexTable[c[e[a9(0x1a6)](d,0x7)]],'-')+hexTable[c[e['ADWPe'](d,0x8)]],hexTable[c[d+0x9]])+'-',hexTable[c[d+0xa]])+hexTable[c[d+0xb]],hexTable[c[d+0xc]])+hexTable[c[d+0xd]]+hexTable[c[e[a9(0x1c5)](d,0xe)]]+hexTable[c[d+0xf]])[a9(0x1e7)]();if(!isValidFormat(f))throw new TypeError(E_INVALID_ID_STR);return f;}